---
id: task-1760398118972-6z882t8hu
status: pending
priority: high
receivedAt: "2025-10-13T23:28:38.972Z"
updatedAt: "2025-10-13T23:28:38.972Z"
directory: 
repository: /Users/griever/Developer/core-library
tags:
  - enhancement
  - api
  - task-management
  - ui-integration
anchors:
  - pure-core/types/task.d.ts
  - MemoryPalace.getTasks
  - Task interface
senderId: electron-app
---

# Problem

# Problem

The `Task` interface returned by `MemoryPalace.getTasks()` does not include a `filePath` field, making it difficult for UI consumers to construct the path to the task file for operations like copying the path or opening the file.

## Current State

**`Task` interface** (lines 10-49 in `pure-core/types/task.d.ts`):
- Contains all task data (content, metadata, timestamps, etc.)
- ❌ Does NOT have a `filePath` field
- Returned by `palace.getTasks()`, `palace.getTask()`, etc.

**`TaskIndexEntry` interface** (lines 231-252 in `pure-core/types/task.d.ts`):
- Lightweight version for fast lookups
- ✅ HAS a `filePath` field (line 251)
- Used internally in the task index

## Why This Is a Problem

UI consumers need to know the file path to:
1. Copy the task file path to clipboard (current use case in electron-app)
2. Open the task file in an editor
3. Show the relative path in the UI
4. Create links to the task file

Currently, UI code has to manually construct the path:
```typescript
const taskFilePath = `${task.repositoryPath}/.alexandria/work/tasks/${task.status}/${task.id}.task.md`;
```

This is fragile because:
- UI code has to know the internal directory structure
- If the library changes the file structure, all consumers break
- The library already knows this information but doesn't expose it

## Proposed Solution

Add a `filePath` field to the `Task` interface:

```typescript
export interface Task {
    /** Unique identifier for the task */
    id: string;
    /** Human-readable title extracted from content */
    title: string;
    /** The full work request in markdown format (for active tasks) */
    content: string;
    /** Current status of the task */
    status: TaskStatus;
    /** Priority level */
    priority: TaskPriority;
    /** Directory path where this task applies */
    directoryPath: ValidatedRelativePath;
    /** Repository this task belongs to */
    repositoryPath: ValidatedRepositoryPath;
    /** Relative path to the task file from repository root */
    filePath: string;  // NEW FIELD
    // ... rest of fields
}
```

The `filePath` should be relative to the repository root, for example:
- `.alexandria/work/tasks/pending/task-123.task.md`
- `.alexandria/work/tasks/in_progress/task-456.task.md`

## Implementation Notes

The library already constructs this path internally when reading/writing tasks. It should populate this field when:
- `receiveTask()` creates a new task
- `getTask()` loads a task from disk
- `getTasks()` loads multiple tasks

The `TaskIndexEntry` already has this field, so the logic exists - it just needs to be included in the full `Task` object.

## Benefits

1. ✅ Single source of truth for file paths
2. ✅ Encapsulates internal directory structure
3. ✅ Makes UI code more robust
4. ✅ Backwards compatible (optional field initially)
5. ✅ Aligns with `TaskIndexEntry` which already has this field

## References

- `Task` interface: `node_modules/@a24z/core-library/dist/pure-core/types/task.d.ts` (lines 10-49)
- `TaskIndexEntry` interface: `node_modules/@a24z/core-library/dist/pure-core/types/task.d.ts` (lines 231-252)
- Consumer use case: `electron-app/src/renderer/panels/components/TasksPanel.tsx` (copy path button)